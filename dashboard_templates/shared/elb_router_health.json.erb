{
  "graphs": [
    {
      "definition": {
        "requests": [
          {
            "q": "per_second(sum:datadog.nozzle.router__0.total_requests{deployment:<%= diego_deployment %>} by {job,index})",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ]
      },
      "title": "Requests per second, Router 0"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:datadog.nozzle.router__0.total_routes{deployment:<%= diego_deployment %>} by {job,index}",
            "type": "line"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "Total routes - router 0"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__0.bad_gateways{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 0.bad_gateways per second"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
           "q": "avg:datadog.nozzle.router__0.latency{deployment:<%= diego_deployment %>} by {job,index}",
            "conditional_formats": []
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "Router 0 Latency"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__0.rejected_requests{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 0.rejected_requests per second"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__0.total_requests{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 0.requests per second"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__0.responses{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 0.responses per second"
    },
    {
      "definition": {
        "requests": [
          {
            "q": "per_second(sum:datadog.nozzle.router__1.total_requests{deployment:<%= diego_deployment %>} by {job,index})",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          },
          {
            "q": "tags:deployment:<%= environment %> end_deploy"
          }
        ]
      },
      "title": "Requests per second router 1"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:datadog.nozzle.router__1.total_routes{deployment:<%= diego_deployment %>} by {job,index}",
            "type": "line"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "Total routes by router 1"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__1.bad_gateways{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 1 .bad_gateways per second"
    },
    {
      "definition": {
        "viz": "heatmap",
        "requests": [
          {
           "q": "avg:datadog.nozzle.router__1.latency{deployment:<%= diego_deployment %>} by {job,index}",
            "conditional_formats": []
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "Router  1 Latency"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__1.rejected_requests{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 1.rejected_requests per second"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__1.total_requests{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 1.requests per second"
    },
    {
      "definition": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.router__1.responses{deployment:<%= diego_deployment %>} by {job,index})",
            "type": "area"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:<%= environment %> start_deploy"
          }
        ]
      },
      "title": "router 1.responses per second"
    }
  ],
  "description": "Health statistics from the routers",
  "id": 19608,
  "title": "<%= environment %> Router health metrics"
}
